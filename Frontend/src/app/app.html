<div class="container">
  <header>
    <h1>{{ title() }}</h1>
    <div class="student-info">
      <p><strong>Nombre:</strong> Asbiel Romario Ramírez Rivera</p>
      <p><strong>Carné:</strong> 2890-18-11745</p>
    </div>
  </header>

  <main>
    <!-- Mensajes de error -->
    @if (error()) {
      <div class="alert alert-error">
        {{ error() }}
      </div>
    }

    <!-- Formulario para agregar contacto -->
    <section class="form-section">
      <h2>Agregar Nuevo Contacto</h2>
      <form (submit)="agregarContacto(); $event.preventDefault()">
        <div class="form-group">
          <label for="nombre">Nombre:</label>
          <input
            type="text"
            id="nombre"
            [(ngModel)]="nuevoContacto.nombre"
            name="nombre"
            placeholder="Ingrese el nombre"
            required
            [disabled]="cargando()"
          />
        </div>

        <div class="form-group">
          <label for="telefono">Teléfono:</label>
          <input
            type="text"
            id="telefono"
            [(ngModel)]="nuevoContacto.telefono"
            name="telefono"
            placeholder="Ingrese el teléfono"
            required
            [disabled]="cargando()"
          />
        </div>

        <button type="submit" class="btn btn-primary" [disabled]="cargando()">
          {{ cargando() ? 'Agregando...' : 'Agregar Contacto' }}
        </button>
      </form>
    </section>

    <!-- Búsqueda en vivo -->
    <section class="search-section">
      <h2>Buscar Contactos</h2>
      <div class="search-box">
        <input
          type="text"
          placeholder="Buscar por nombre..."
          [value]="terminoBusqueda()"
          (input)="onBusquedaChange($event)"
          [disabled]="cargando()"
        />
      </div>
    </section>

    <!-- Lista de contactos -->
    <section class="contacts-section">
      <h2>Lista de Contactos</h2>

      @if (cargando()) {
        <div class="loading">Cargando...</div>
      }

      @if (!cargando() && contactos().length === 0) {
        <div class="empty-state">
          <p>No hay contactos para mostrar.</p>
          @if (terminoBusqueda()) {
            <p>Intenta con otro término de búsqueda.</p>
          }
        </div>
      }

      @if (!cargando() && contactos().length > 0) {
        <div class="contacts-list">
          @for (contacto of contactos(); track contacto.id) {
            <div class="contact-card">
              <div class="contact-info">
                <h3>{{ contacto.nombre }}</h3>
                <p>{{ contacto.telefono }}</p>
              </div>
              <button
                class="btn btn-danger"
                (click)="eliminarContacto(contacto.id!)"
                [disabled]="cargando()"
              >
                Eliminar
              </button>
            </div>
          }
        </div>
      }
    </section>
  </main>
</div>

<router-outlet />
